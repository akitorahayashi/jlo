# Jules Workflow Reproduction Guide

This document describes the repository state required to reproduce the Jules workflow in other projects.

## Required Configuration

Configure repository variables and secrets referenced by the workflow kit (see `.github/workflows/jules-*.yml`).
Set the optional `JULES_TARGET_BRANCH` repository variable to override the implementer base branch (defaults to `main`).
Branch protection on `jules` must require the workflow status checks and allow auto-merge.

## Required Files

Install the Jules workflow kit with `jlo init workflows` to populate the required `.github/` assets.

The kit layout follows these patterns:

- `.github/workflows/jules-*.yml`
- `.github/actions/` (Jules composite actions)
- `.github/scripts/jules-*.sh`

### Review Configuration

If you use automated review tools, configure them to suppress reviews on Jules-managed PRs while keeping reviews active for human Implementer PRs.

### .jules/ (scaffold)

The scaffold is generated by `jlo init` and matches the jlo version used by the workflows.

## Repository State

- The `jules` branch exists and contains the `.jules/` scaffold.
- The git identity configured by the workflow kit matches the target repository's bot account.
- The bot account used by workflows has write access to the repository.
- Auto-review tools are configured for on-demand review only for Jules-managed PRs.

## Workflow Execution Flow

The orchestration workflow under `.github/workflows/jules-*.yml` runs the layers in sequence, producing agent branches according to workflow rules.

- Observer/Decider/Planner: Only `.jules/` changes, auto-merge
- Implementer: Source code changes, human review required

## Self-hosted Runners

The self-hosted workflow kit uses `runs-on: self-hosted` and installs `jlo` into the runner temp directory, adding it to the workflow PATH without requiring `sudo`.
Self-hosted runners must provide the commands referenced by the kit scripts and workflows; treat the scripts as the authoritative source of required tooling.
The installer detects OS/architecture and fails fast if the release assets do not support the runner.

## Troubleshooting

### Auto-merge Fails

- Repository settings, branch protection, and permissions align with the requirements referenced by the Jules workflows.
