# Planner Layer Archetype
# Roles: specifier

layer: planners
type: planner

description: |
  Planners read issues and decompose them into concrete, executable tasks
  with verification plans.

behavior:
  read:
    - JULES.md
    - .jules/JULES.md
    - .jules/roles/{layer}/{role}/role.yml
    - .jules/issues/*.md
    - "**/*.{rs,ts,js,py,go,java}"

  write:
    - .jules/tasks/

  delete:
    - .jules/issues/*.md

  forbidden:
    - .jules/roles/*/notes/
    - .jules/events/
    - プロダクトコード

actions:
  - step: 影響分析
    description: |
      影響範囲の完全な特定（コード、テスト、ドキュメント）。
      既存システムへの副作用の考慮。

  - step: タスク分解
    description: |
      issueを具体的で実行可能なタスク一式に分解する。
      各タスクには検証計画を含める。

  - step: クリーンアップ
    description: タスク分解後、元の issue ファイルは削除する。

constraints:
  - プロダクトコードを編集しない
  - notes/ を作成しない
  - events/ を作成しない

output_formats:
  task:
    path: .jules/tasks/*.md
    template: |
      ---
      id: <string>
      parent_issue_id: <string>
      title: <string>
      status: open
      ---

      ## 目的
      <何をするタスクか>

      ## 変更対象
      - <filepath>: <概要>

      ## 検証計画
      - コマンド: <例: just test>
      - 期待値: <例: テストケースXが通過すること>
