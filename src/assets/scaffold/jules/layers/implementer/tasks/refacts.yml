task: implement-refact

objective:
  Refactor existing code as described in the requirement. Improve structure, readability,
  or maintainability without changing external behaviour.

steps:
  - Understand the refactoring scope and goals from the requirement.
  - Verify existing tests pass before making changes (establish baseline).
  - Apply refactoring incrementally â€” keep each change reviewable.
  - Ensure all existing tests still pass after refactoring.
  - Add tests if coverage gaps are discovered during refactoring.
  - Audit and declaratively update documentation if the refactoring involves structural changes or shifts in design philosophy.
  - Run the project's verification suite (tests, linting, type checks).
  - Create a pull request referencing the requirement.

constraints:
  - "No observable behaviour changes unless explicitly stated in the requirement."
  - "All existing tests must pass without modification (unless a test was testing incorrect behaviour)."
  - "All development-related documentation must be written in English."
  - "Keep documentation for LLM (AGENTS.md, CLAUDE.md, etc.) concise for token efficiency. Focus on essential information only."
  - "Documentation is written in a declarative style describing the current state. Imperative or changelog-style descriptions are avoided."
  - "Declarative updates preserve existing, correct content and integrate new content where appropriate, without duplication. Avoid ripping and replacing everything."
