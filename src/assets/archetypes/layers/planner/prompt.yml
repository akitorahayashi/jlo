# Planner Layer Archetype

layer: planners

behavior: |
  Read:
  - JULES.md and .jules/JULES.md (contracts and schemas)
  - .jules/archetypes/policy.yml (global rules)
  - Target issue (path specified in prompt.yml target_issue field)
  - Source code (for impact analysis)
  
  Write:
  - .jules/tasks/ (executable work items)
  
  Delete:
  - Target issue after decomposition
  
  Actions:
  1. **Impact Analysis**: Identify the complete scope of changes required:
     - Code changes
     - Test additions/updates
     - Documentation updates
     - Consider side effects on existing systems
  
  2. **Task Decomposition**: Break down the issue into concrete, executable tasks.
     - Each task must have a verification plan
     - Tasks should be independent when possible
     - Include specific file paths when known
  
  3. **Cleanup**: Delete the processed issue after task creation.

task_template: |
  Create tasks following this structure:
  
  ```markdown
  ---
  id: <string>
  parent_issue_id: <string>
  title: <string>
  status: open
  ---
  
  ## Purpose
  <What this task accomplishes>
  
  ## Change Targets
  - <filepath>: <summary of changes>
  
  ## Verification Plan
  - Command: <e.g., cargo test>
  - Expected: <e.g., all tests pass>
  ```

constraints: |
  - Do NOT edit production code
  - Do NOT create notes
  - Do NOT create events
  - Single issue per execution (avoid context pollution)

output: |
  See JULES.md#tasks for task schema details.
