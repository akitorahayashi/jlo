schema_version: 2

# Metadata
id: "tstdup"
source_events:
  - "dupe00"
title: "Add Test for Duplicate Roles in Schedule"
label: "tests"
priority: "medium"
summary: "Add unit tests to verify duplicate role detection in Schedule::validate."

# Content
goal: |
  Ensure the `Schedule::validate` logic for detecting duplicate roles is covered by regression tests.

problem: |
  The function `Schedule::validate` includes logic to detect duplicate roles, but this logic is not covered by existing unit tests.

impact: |
  A regression in the validation logic (e.g., during refactoring) could go unnoticed, allowing invalid schedules with duplicate roles to be processed.

desired_outcome: |
  A specific unit test case `duplicate_role_ids_fail` is added to `src/domain/config/schedule.rs`.

constraints: []
risks: []

# Specifics
affected_areas:
  - "src/domain/config/schedule.rs"

acceptance_criteria:
  - "New test case added that defines a schedule with duplicate roles and asserts validation failure."

verification_criteria:
  - "Run `cargo test src/domain/config/schedule.rs` and ensure the new test passes."

# Analysis Flags
requires_deep_analysis: false
deep_analysis_reason: ""
