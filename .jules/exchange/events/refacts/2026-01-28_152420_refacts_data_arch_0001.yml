schema_version: 1

# Metadata
id: "2026-01-28_152420_refacts_data_arch_0001"
created_at: "2026-01-28"
author_role: "data_arch"
category: "refacts"
confidence: "high"

# Content
title: "Weak Typing and Missing Validation in env.toml Parsing"
statement: |
  The `Generator::parse_env_toml` function relies on manual, untyped parsing of TOML tables, silently ignoring structure mismatches and lacking a formal domain model for environment configuration. This violates the principle of Isomorphic Representation and poses a risk of data corruption or loss during configuration merges.

evidence:
  - path: "src/services/generator.rs"
    loc: "parse_env_toml"
    note: "Manual parsing of `toml::Value::Table` coerces structure without validation, dropping non-conforming data silently."

tags:
  - "data-validation"
  - "type-safety"
  - "ssot"
