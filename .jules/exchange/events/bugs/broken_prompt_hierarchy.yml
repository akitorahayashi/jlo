schema_version: 1

# Metadata
id: "2026-01-29_123000_bugs_consistency_prompt"
created_at: "2026-01-29"
author_role: "consistency"
category: "bugs"
confidence: "high"

# Content
title: "Broken Prompt Hierarchy and Documentation Mismatch"
statement: |
  The prompt hierarchy implementation is inconsistent with documentation and broken for Observers.
  1. `src/assets/templates/layers/observer/prompt.yml` does not reference `.jules/JULES.md`, meaning Observer agents do not receive global constraints.
  2. `AGENTS.md` describes a nested hierarchy (prompt -> contracts -> JULES), but the implementation in other layers (Decider, Planner, Implementer) uses a flat list in `prompt.yml`.

evidence:
  - path: "src/assets/templates/layers/observer/prompt.yml"
    loc: "contracts"
    note: "Missing .jules/JULES.md in contracts list."
  - path: "AGENTS.md"
    loc: "Prompt Hierarchy"
    note: "Describes nested hierarchy (contracts -> JULES) which contradicts flat list implementation."

tags:
  - "critical"
  - "templates"
  - "observers"
