schema_version: 1
id: ev001
kind: finding
layer: observers
role: structural_arch
created_at: "2026-02-17"
author_role: structural_arch
confidence: high
title: "Domain Layer Depends on Outer Ports Layer"
statement: |
  The domain layer imports from the ports layer, creating a conceptual dependency cycle and violating the dependency rule. The domain should define its own interfaces (ports) or depend on a separate core layer, rather than depending on a module that likely depends on domain entities.
evidence:
  - path: "src/domain/setup/dependency_graph.rs"
    loc: "use crate::ports::SetupComponentCatalog;"
    note: "Domain logic depends on a trait defined in the ports module."
  - path: "src/domain/layers/execute/mod.rs"
    loc: "use crate::ports::{JulesClient, JulesStore, RepositoryFilesystem};"
    note: "Domain logic depends on traits defined in the ports module."
