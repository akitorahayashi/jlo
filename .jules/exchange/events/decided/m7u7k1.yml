schema_version: 1

# Metadata
id: "m7u7k1"
issue_id: "domcln"
created_at: "2026-02-16"
author_role: "rustacean"
confidence: "medium"

# Content
title: "Avoid Tactical Arc<Mutex> in Prompt Assembly"
statement: |
  `src/domain/layers/prompt_assembly/assembler.rs` uses `Arc<Mutex<...>>` to collect side effects from `minijinja` callbacks.
  This is a tactical use of shared mutability that bypasses ownership design, introducing runtime locking overhead
  and complexity where a purely functional approach or a better abstraction could work.

# Evidence supporting the observation
evidence:
  - path: "src/domain/layers/prompt_assembly/assembler.rs"
    loc:
      - "46-48"
    note: "included_files, skipped_files, and failure are wrapped in Arc<Mutex> solely to be captured by closures."
