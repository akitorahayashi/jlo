schema_version: 1

id: "tax002"
issue_id: "u5w6t7"
created_at: "2024-05-22"
author_role: "taxonomy"
confidence: "high"

title: "Layer vs Role Directory Naming Conflict"
statement: |
  There is a semantic conflict between the domain concept `Layer` and the deployed scaffold directory `.jules/roles/`.
  In `src/domain/workspace/layer.rs`, the concept is explicitly defined as `Layer`.
  The internal scaffold source uses `src/assets/scaffold/jules/layers/` (inferred from `map_scaffold_path`), but the deployed directory is mapped to `.jules/roles/`.
  This creates confusion because `Layer` definitions (like `contracts.yml`) reside in a directory named `roles`, suggesting they are role-specific rather than layer-wide.
  This is particularly confusing for single-role layers where the boundary is blurred.

evidence:
  - path: "src/adapters/embedded_role_template_store.rs"
    loc:
      - "fn map_scaffold_path"
    note: "Explicitly maps 'jules/layers/' to '.jules/roles/'."
  - path: "src/domain/workspace/layer.rs"
    loc:
      - "pub enum Layer"
    note: "Defines the domain concept as 'Layer'."
