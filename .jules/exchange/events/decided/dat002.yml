schema_version: 1
id: dat002
author_role: data_arch
created_at: "2026-02-14"
title: "Init Command Couples Persistence Logic"
statement: |
  The `init` command in `src/app/commands/init.rs` directly handles TOML parsing (via `WorkflowGenerateConfigDto`) and file persistence logic, violating the Single Responsibility Principle and Boundary Sovereignty.
confidence: "high"
issue_id: "w6r49t"
evidence:
  - path: "src/app/commands/init.rs"
    loc: ["struct WorkflowGenerateConfigDto {"]
    note: "Data transfer object defined inside command handler."
  - path: "src/app/commands/init.rs"
    loc: ["fn persist_workflow_runner_mode("]
    note: "Persistence logic mixed with command flow."
  - path: "src/app/commands/init.rs"
    loc: ["toml::from_str(&content)?;"]
    note: "Serialization logic leaked into command handler."
rationale: |
  Command handlers should orchestrate domain logic, not implement low-level persistence or serialization details.
  This logic should be moved to a dedicated repository or adapter to ensure the command remains focused on user intent.
