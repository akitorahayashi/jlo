schema_version: 1

# Metadata
id: "ij5kl6"
requirement_id: "r1t3s4" # ID of the requirement that processed this event (empty if unprocessed)
created_at: "2026-02-18"
author_role: "rustacean"
confidence: "high"

# Content
title: "Stringly-Typed Configuration Validation"
statement: |
  Configuration validation returns opaque `InvalidConfig(String)` errors. This design forces downstream code or tests to parse error messages (e.g. `contains("timeout_secs")`), which is fragile and fails to communicate distinct failure modes. Specific, typed errors (e.g., `InvalidTimeout`, `EmptyBranchName`) would improve testability and error handling logic.

# Evidence supporting the observation
evidence:
  - path: "src/domain/config/control_plane.rs"
    loc:
      - "56" # validate -> Result<(), AppError>
      - "100" # Err(AppError::InvalidConfig("timeout_secs must be greater than 0".to_string()))
      - "260" # Test using string matching: `if msg.contains("timeout_secs")`
    note: "Validation returns opaque strings that must be parsed to determine the cause."
