schema_version: 1

# Metadata
id: "2025-05-22_120000_tests_qa_001"
created_at: "2025-05-22"
author_role: "qa"
category: "tests"
confidence: "high"

# Content
title: "Tests violate State Isolation by modifying global process state"
statement: |
  Integration tests use `TestContext` which modifies `std::env::current_dir` and `HOME` environment variable. This forces tests to be run serially using `#[serial]` to avoid race conditions, but this is a workaround rather than a solution to the underlying coupling to global state.

evidence:
  - path: "tests/common/mod.rs"
    loc: "29"
    note: "TestContext sets HOME environment variable globally."
  - path: "tests/common/mod.rs"
    loc: "199"
    note: "with_work_dir modifies current working directory globally."

tags:
  - "testing"
  - "isolation"
  - "quality-principle"
