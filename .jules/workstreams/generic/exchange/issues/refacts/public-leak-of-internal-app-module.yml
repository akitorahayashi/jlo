schema_version: 2

# Metadata
id: "r3y12c"
source_events:
  - "pl912c"
title: "Public leak of internal app module"
label: "refacts"
priority: "high"
summary: "The internal `app` module is publicly exposed via `pub mod app;` in `src/lib.rs`."

# Content
problem: |
  The library exposes the internal `app` module publicly via `pub mod app;` in `src/lib.rs`. This leaks implementation details (such as CLI commands and internal structures) to the public API surface, making it difficult to change the internal structure without breaking downstream consumers.

impact: |
  It violates encapsulation principles and creates a fragile public API. Any changes to the `app` module become breaking changes for library users, hindering refactoring and evolution.

desired_outcome: |
  The `app` module should be encapsulated. It should be declared as `mod app;` (private) or `pub(crate) mod app;` (crate-visible only), preventing external access to its internals. Only necessary types should be re-exported explicitly.

constraints: []
risks: []

# Specifics
affected_areas:
  - "src/lib.rs"

acceptance_criteria:
  - "`pub mod app;` in `src/lib.rs` is changed to a non-public visibility (e.g., `pub(crate)` or private)."
  - "Only intended public API types are re-exported."
  - "External consumers cannot access `jlo::app` directly."

verification_commands:
  - "cargo check"
  - "cargo test"

# Analysis Flags
requires_deep_analysis: false
deep_analysis_reason: ""
