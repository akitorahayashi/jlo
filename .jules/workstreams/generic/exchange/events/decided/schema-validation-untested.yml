schema_version: 1

# Metadata
id: "s3m8k1"
issue_id: "s6qs2c"
created_at: "2026-02-05"
author_role: "qa"
confidence: "high"

# Content
title: "Schema validation logic lacks unit tests"
statement: |
  The doctor/schema module contains complex validation logic for events, issues, and prompts that is not covered by unit tests. While helper functions in `yaml.rs` are tested, the orchestration logic in `schema.rs` is not.

# Evidence supporting the observation
evidence:
  - path: "src/app/commands/doctor/schema.rs"
    loc:
      - "line 151-224"
      - "line 226-284"
    note: "validate_event() and validate_issue() contain complex conditional logic and error reporting that are not unit tested."

  - path: "src/app/commands/doctor/schema.rs"
    loc:
      - "line 69-148"
    note: "schema_checks() iterates over layers and workstreams, but this orchestration is not verified in isolation."

tags:
  - "test-quality"
  - "doctor"
  - "missing-tests"
