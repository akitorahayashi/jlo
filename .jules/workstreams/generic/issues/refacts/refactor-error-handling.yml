schema_version: 2

# Metadata
id: "err8x2"
source_events:
  - "e1a2b3"
  - "7890ab"
title: "Refactor Error Handling"
label: "refacts"
priority: "medium"
summary: "Replace stringly-typed AppError variants with structured types."

# Content
problem: |
  The `AppError` enum relies heavily on `ConfigError(String)` and other unstructured variants that wrap a simple `String`.
  This erases semantic meaning and makes programmatic error handling fragile, as callers (like `HttpJulesClient`) must parse error messages to distinguish failure modes (e.g. for retries).

impact: |
  Error handling logic is brittle and prone to breaking if error strings change.
  It is difficult to implement robust retry strategies or specific error reporting for users.

desired_outcome: |
  `AppError` uses specific, typed variants for common failure modes.
  Callers handle errors programmatically without string matching.
  `HttpJulesClient` retry logic is robust.

# Specifics
affected_areas:
  - "src/domain/error.rs"
  - "src/services/jules_client_http.rs"
  - "src/services/scaffold_assets.rs"

acceptance_criteria:
  - "Replace `AppError::ConfigError(String)` with specific variants where possible (e.g. `NetworkError`, `RateLimitError`)."
  - "Update `HttpJulesClient` retry logic to not rely on string matching."
  - "Ensure `scaffold_assets` service uses appropriate error types."

verification_commands:
  - "cargo test"
  - "cargo check"

# Analysis Flags
requires_deep_analysis: false
deep_analysis_reason: ""
