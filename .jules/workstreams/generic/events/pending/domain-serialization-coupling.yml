schema_version: 1

# Metadata
id: "x7k9p2"
issue_id: ""
created_at: "2026-01-31"
author_role: "data_arch"
confidence: "high"

# Content
title: "Domain models tightly coupled to serialization logic"
statement: |
  The domain models in `src/domain/setup.rs` and `src/domain/run_config.rs` are tightly coupled to serialization concerns. Structs like `EnvSpec`, `SetupConfig`, and `ComponentMeta` directly derive `serde::Deserialize` and use `serde` attributes. Additionally, `RunConfig::parse_toml` introduces a direct dependency on the `toml` crate within the domain logic. This violates the "Boundary Sovereignty" principle by leaking transport/persistence details into the core domain.

# Evidence supporting the observation
evidence:
  - path: "src/domain/setup.rs"
    loc:
      - "derive(Deserialize)"
      - "#[serde(default)]"
    note: "Domain entities deriving Deserialize and using serde attributes."

  - path: "src/domain/run_config.rs"
    loc:
      - "fn parse_toml"
      - "toml::from_str"
    note: "Domain logic depending directly on toml crate."

tags:
  - "boundary-sovereignty"
  - "domain-contamination"
  - "serialization"
