schema_version: 1
id: "e1a2b3"
issue_id: ""
created_at: "2026-02-01"
author_role: "structural_arch"
confidence: "high"
title: "Strict Dependency Violation: App Imports Services Directly"
statement: |
  The `app` layer (specifically `src/app/commands`) directly imports concrete implementations from `src/services`, violating the Hexagonal Architecture/Ports & Adapters pattern.

  Target Flow: `app` -> `ports` <- `services`
  Current Flow: `app` -> `services`

  The `app` layer should define interfaces (in `ports`) that `services` implement. The `app` layer should only depend on `ports`. Wiring should happen at the composition root (e.g., `main.rs` or `lib.rs`), not inside commands.
evidence:
  - path: "src/app/commands/template/command.rs"
    loc:
      - "use crate::services::role_factory::RoleFactory;"
    note: "Direct import of service implementation."
  - path: "src/app/commands/setup/generate.rs"
    loc:
      - "use crate::services::artifact_generator::ArtifactGenerator;"
    note: "Direct import of service implementation."
tags:
  - "architecture"
  - "dependency-violation"
