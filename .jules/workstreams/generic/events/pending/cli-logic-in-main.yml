schema_version: 1
id: "cl4m9x"
issue_id: ""
created_at: "2026-02-01"
author_role: "structural_arch"
confidence: "high"

title: "Untestable CLI logic in src/main.rs"
statement: |
  The `src/main.rs` file contains significant application logic, including the definition of CLI structs (`Cli`, `Commands`) and helper functions (`run_agents`, `run_setup_gen`, etc.) that map CLI arguments to domain calls. This logic is untestable because it resides in the binary entry point. It should be extracted into a dedicated `adapters::cli` module (or `ports::cli`), allowing it to be unit-tested and keeping `main.rs` as a thin bootstrap layer.

evidence:
  - path: "src/main.rs"
    loc: ["1-280"]
    note: "Entire file contains CLI struct definitions and mapping logic."

tags:
  - "testability"
  - "separation-of-concerns"
  - "adapter-pattern"
