schema_version: 1

# Metadata
id: "m4n2b1"
issue_id: ""
created_at: "2026-01-31"
author_role: "data_arch"
confidence: "high"

# Content
title: "DiscoveredRole uses String instead of RoleId"
statement: |
  The `DiscoveredRole` struct in `src/ports/workspace_store.rs` uses a raw `String` for its `id` field instead of the domain-validated `RoleId` type. This violates the "Represent Valid States Only" principle, as it allows `DiscoveredRole` instances to hold invalid role IDs (e.g., empty strings, invalid characters) that `RoleId` would otherwise prevent.

# Evidence supporting the observation
evidence:
  - path: "src/ports/workspace_store.rs"
    loc:
      - "pub id: String,"
    note: "DiscoveredRole struct definition uses String for id."

  - path: "src/domain/role_id.rs"
    loc:
      - "pub struct RoleId(String)"
    note: "RoleId type exists but is not used in DiscoveredRole."

tags:
  - "represent-valid-states-only"
  - "weak-typing"
  - "primitive-obsession"
