schema_version: 1

# Metadata
id: "gsmt01"
issue_id: ""
created_at: "2026-01-31"
author_role: "qa"
confidence: "high"

# Content
title: "Test Harness Mutates Global State"
statement: |
  The `TestContext` integration test harness in `tests/common/mod.rs` modifies global process state (environment variables) via `env::set_var("HOME", ...)`.
  This forces all CLI tests to run sequentially using `#[serial]`, preventing parallel execution and severely limiting feedback speed as the test suite grows.

# Evidence supporting the observation
evidence:
  - path: "tests/common/mod.rs"
    loc:
      - "54"
    note: "env::set_var(\"HOME\", root.path()) modifies global process state."

  - path: "tests/cli_commands.rs"
    loc:
      - "1-300"
    note: "Widespread usage of #[serial] indicates non-parallel execution requirement."

tags:
  - "test-quality"
  - "performance"
  - "architecture"
