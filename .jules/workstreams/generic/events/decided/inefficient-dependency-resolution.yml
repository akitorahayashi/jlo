schema_version: 1

# Metadata
id: "3d68ab"
issue_id: "7d8e9f"
created_at: "2026-02-01"
author_role: "data_arch"
confidence: "high"

# Content
title: "Inefficient Data Transformation in Resolver"
statement: |
  The `Resolver::resolve` service performs inefficient data transformations by cloning entire `Component` structs, including potentially large `script_content`, to facilitate topological sorting. The sorting algorithm operates on the full data objects rather than a lightweight graph representation or references, leading to unnecessary memory allocation and copying.

# Evidence supporting the observation
evidence:
  - path: "src/services/resolver.rs"
    loc:
      - "fn resolve"
    note: "The `resolve` method builds a `BTreeMap<String, Component>` called `needed`, cloning components into it."

  - path: "src/services/resolver.rs"
    loc:
      - "collected.insert(name.to_string(), component.clone());"
    note: "The `collect_dependencies` helper function explicitly clones the full component when adding it to the collection."

tags:
  - "performance"
  - "data-transformation"
  - "inefficiency"
